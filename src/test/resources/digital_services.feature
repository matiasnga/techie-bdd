Feature: Servicios Digitales Api-Tax

  Scenario Outline: <Case Number>. <Description>
    Given un payment en dia <"date"> con taxpayerid <taxpayerId> en jusrisdiccion <jurisdiction> con monto en <currency> con importe <amount> y merchant <merchant>
    When obtengo calculo con status 201
    Then la percepcion de 767 debe ser <IVA amount>, la condicion debe ser <IVA type>, la base imponible debe ser <IVA taxBase>, el regimen debe ser <IVA taxRegimeCode> y la alicuota <IVA rate>
    Then la percepcion de 217 debe ser <IGG amount>, la condicion debe ser <IGG type>, la base imponible debe ser <IGG taxBase>, el regimen debe ser <IGG taxRegimeCode> y la alicuota <IGG rate>
    Then la percepcion de <jurisdiction> debe ser <IBB amount>, la condicion debe ser <IBB type>, la base imponible debe ser <IBB taxBase>, el regimen debe ser <IBB taxRegimeCode> y la alicuota <IBB rate>
    Then la percepcion de 939 debe ser <IP amount>, la condicion debe ser <IP type>, la base imponible debe ser <IP taxBase>, el regimen debe ser <IP taxRegimeCode> y la alicuota <IP rate>

    Examples:
      | Case Number |  Description | "date" | taxpayerId | jurisdiction | amount | usd amount | currency | merchant | apartado | exchange | IGG amount | IGG rate | IGG taxRegimeCode | IGG type | IGG taxBase | IP amount | IP rate | IP taxRegimeCode | IP type | IP taxBase | IVA rate | IVA amount | IVA taxRegimeCode | IVA type | IVA taxBase | IBB rate | IBB amount | IBB taxRegimeCode | IBB type | IBB taxBase |
      | 1 | Apartado A. IIBB N/A (menor a 10 usd ) | "2024-11-08 00:00:00" | 3000000007 | 901 | 11881.09 | 9.9 | "ars" | "GOOGLE *YouTubeP P15kvqUY" | A | 1200.11 | 3564.33 | 0.3 | 594 | "Sujeto Alcanzado" | 11881.09 | 950.49 | 0.08 | 989 | "SSDD" | 11881.09 | 0.21 | 2495.03 | 956 | "SA" | 11881.09 | 0 | 0 | 0 | "-" | 11881.09 |
      | 2 | Apartado A. IIBB N/A (igual  a 10 usd ) | "2024-11-08 00:00:00" | 3000000007 | 902 | 12001.1 | 10 | "ars" | "GOOGLE *YouTubeP P15kvqUY" | A | 1200.11 | 3600.33 | 0.3 | 594 | "Sujeto Alcanzado" | 12001.1 | 960.09 | 0.08 | 989 | "SSDD" | 12001.1 | 0.21 | 2520.23 | 956 | "SA" | 12001.1 | 0 | 0 | 0 | "-" | 12001.1 |
      | 3 | Apartado A. IIBB N/A (mayor a 10usd) | "2024-11-08 00:00:00" | 3000000007 | 903 | 12025.1 | 10.02 | "ars" | "GOOGLE *YouTubeP P15kvqUY" | A | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0.21 | 2525.27 | 956 | "SA" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 4 | Apartado B. IIBB N/A (menor a 10 usd ) | "2024-11-08 00:00:00" | 3000000007 | 902 | 11881.09 | 9.9 | "ars" | "Netflix" | B | 1200.11 | 3564.33 | 0.3 | 594 | "Sujeto Alcanzado" | 11881.09 | 950.49 | 0.08 | 989 | "SSDD" | 11881.09 | 0.21 | 2495.03 | 956 | "SA" | 11881.09 | 0 | 0 | 0 | "-" | 11881.09 |
      | 5 | Apartado B. IIBB N/A (igual  a 10 usd ) | "2024-11-08 00:00:00" | 3000000007 | 903 | 12001.1 | 10 | "ars" | "Netflix" | B | 1200.11 | 3600.33 | 0.3 | 594 | "Sujeto Alcanzado" | 12001.1 | 960.09 | 0.08 | 989 | "SSDD" | 12001.1 | 0 | 0 | 956 | "EX" | 12001.1 | 0 | 0 | 0 | "-" | 12001.1 |
      | 6 | Apartado B. IIBB N/A (mayor a 10usd) | "2024-11-08 00:00:00" | 3000000007 | 904 | 12025.1 | 10.02 | "ars" | "Netflix" | B | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0.03 | 360.75 | 99 | "AC" | 12025.1 |
      | 7 | No SSDD | "2024-11-08 00:00:00" | 3000000007 | 905 | 12025.1 | 10.02 | "ars" | "no es SSDD" | - | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 3607.53 | 0.3 | 990 | "NO_SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 8 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 906 | 12025.1 | 10.02 | "ars" | "GOOGLE *YouTubeP P15kvqUY" | A | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0.21 | 2525.27 | 956 | "SA" | 12025.1 | 0.055 | 661.38 | 99 | "AC" | 12025.1 |
      | 9 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 907 | 12025.1 | 10.02 | "ars" | "Netflix" | B | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 10 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 908 | 12025.1 | 10.02 | "ars" | "Netflix" | B | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 11 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 909 | 12025.1 | 10.02 | "ars" | "Netflix" | B | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 12 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 910 | 12025.1 | 10.02 | "ars" | "no es SSDD" | - | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 3607.53 | 0.3 | 990 | "NO_SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 13 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 911 | 12025.1 | 10.02 | "ars" | "GOOGLE *YouTubeP P15kvqUY" | A | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0.21 | 2525.27 | 956 | "SA" | 12025.1 | 0.01 | 120.25 | 99 | "AC" | 12025.1 |
      | 14 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 912 | 12025.1 | 10.02 | "ars" | "Netflix" | B | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 15 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 913 | 12025.1 | 10.02 | "ars" | "Netflix" | B | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 16 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 914 | 12025.1 | 10.02 | "ars" | "Netflix" | B | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 17 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 915 | 12025.1 | 10.02 | "ars" | "GOOGLE *YouTubeP P15kvqUY" | B | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0.21 | 2525.27 | 956 | "SA" | 12025.1 | 0.04 | 481 | 99 | "AC" | 12025.1 |
      | 18 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 916 | 12025.1 | 10.02 | "ars" | "GOOGLE *YouTubeP P15kvqUY" | A | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0.21 | 2525.27 | 956 | "SA" | 12025.1 | 0.05 | 601.26 | 99 | "AC" | 12025.1 |
      | 19 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 917 | 12025.1 | 10.02 | "ars" | "Netflix" | B | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0.036 | 432.9 | 99 | "AC" | 12025.1 |
      | 20 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 918 | 12025.1 | 10.02 | "ars" | "Netflix" | B | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 21 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 919 | 12025.1 | 10.02 | "ars" | "Netflix" | B | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 22 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 920 | 12025.1 | 10.02 | "ars" | "no es SSDD" | - | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 3607.53 | 0.3 | 990 | "NO_SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 23 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 921 | 12025.1 | 10.02 | "ars" | "Netflix" | B | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 24 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 922 | 12025.1 | 10.02 | "ars" | "no es SSDD" | - | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 3607.53 | 0.3 | 990 | "NO_SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |
      | 25 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 923 | 12025.1 | 10.02 | "ars" | "GOOGLE *YouTubeP P15kvqUY" | A | 1200.11 | 0 | 0 | 594 | "EX" | 12025.1 | 962.01 | 0.08 | 989 | "SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0.03 | 360.75 | 99 | "AC" | 12025.1 |
      | 26 | IIBB | "2024-11-08 00:00:00" | 3000000007 | 924 | 12025.1 | 10.02 | "ars" | "no es SSDD" | - | 1200.11 | 3607.53 | 0.3 | 594 | "Sujeto Alcanzado" | 12025.1 | 3607.53 | 0.3 | 990 | "NO_SSDD" | 12025.1 | 0 | 0 | 956 | "EX" | 12025.1 | 0 | 0 | 0 | "-" | 12025.1 |




